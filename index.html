

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥åº·è¯æ˜ - æµ™æ±Ÿçœå«ç”Ÿå¥åº·å§”å‘˜ä¼š</title>
    <style>
        :root {
            --primary-color: #1677ff;
            --primary-dark: #0958d9;
            --text-primary: #333;
            --text-secondary: #666;
            --text-tertiary: #999;
            --border-color: #f0f0f0;
            --border-dark: #eee;
            --bg-white: #fff;
            --bg-gray: #f5f5f5;
            --bg-black: #000;
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: "Microsoft YaHei", "PingFang SC", "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-gray);
            color: var(--text-primary);
            line-height: 1.5;
            font-size: 14px;
            min-height: 100vh;
        }

        .header {
            background-color: var(--bg-black);
            color: #fff;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .header h1 {
            font-size: 18px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .close-btn {
            font-size: 24px;
            line-height: 1;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: none;
            border: none;
            color: #fff;
            transition: opacity 0.2s;
            border-radius: 50%;
        }

        .close-btn:hover { opacity: 0.8; }
        .close-btn:active { background-color: rgba(255, 255, 255, 0.1); }

        .domain {
            font-size: 12px;
            color: var(--text-tertiary);
            text-align: center;
            background-color: var(--bg-black);
            padding: 8px 16px 12px;
            border-bottom: 1px solid #222;
        }

        .container {
            background-color: var(--bg-white);
            margin: 16px;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.3s;
        }

        .container:hover { box-shadow: var(--shadow-md); }

        .section {
            padding: 20px 16px;
            border-bottom: 1px solid var(--border-dark);
            position: relative;
        }

        .section:last-child { border-bottom: none; }

        .section-title {
            display: flex;
            align-items: center;
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 16px;
        }

        .section-icon {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            flex-shrink: 0;
            background-color: var(--primary-color);
            mask-size: contain;
            mask-repeat: no-repeat;
            mask-position: center;
            -webkit-mask-size: contain;
            -webkit-mask-repeat: no-repeat;
            -webkit-mask-position: center;
        }

        .icon-user {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zm0 8c-1.79 0-3.24 1.31-3.46 3h6.92c-.22-1.69-1.67-3-3.46-3z'/%3E%3C/svg%3E");
        }

        .icon-info {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z'/%3E%3C/svg%3E");
        }

        .icon-company {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-4v2h4v-2zm0 4h-4v2h4v-2z'/%3E%3C/svg%3E");
        }

        .icon-certificate {
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-9 16H5v-2h6v2zm8-4H5v-2h14v2zm0-4H5V8h14v2z'/%3E%3C/svg%3E");
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }

        .info-row:hover { background-color: rgba(22, 119, 255, 0.02); }
        .info-row:last-child { border-bottom: none; }

        .label {
            color: var(--text-secondary);
            font-size: 14px;
            flex-shrink: 0;
        }

        .value {
            color: var(--text-primary);
            font-size: 14px;
            text-align: right;
            max-width: 65%;
            word-break: break-word;
            font-weight: 500;
        }

        .value.empty {
            color: var(--text-tertiary);
            font-style: italic;
        }

        .photo-container {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }

        .photo {
            width: 110px;
            height: 140px;
            object-fit: cover;
            border: 1px solid var(--border-dark);
            border-radius: var(--radius-sm);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            display: none;
        }

        .photo.show {
            display: block;
        }

        .photo:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .photo-placeholder {
            width: 110px;
            height: 140px;
            background: linear-gradient(135deg, #f5f5f5 25%, #e8e8e8 25%, #e8e8e8 50%, #f5f5f5 50%, #f5f5f5 75%, #e8e8e8 75%);
            background-size: 20px 20px;
            border: 2px dashed #1677ff;
            border-radius: var(--radius-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #1677ff;
            font-size: 12px;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-placeholder:hover {
            background: linear-gradient(135deg, #e8f4ff 25%, #d1e9ff 25%, #d1e9ff 50%, #e8f4ff 50%, #e8f4ff 75%, #d1e9ff 75%);
            border-color: #0958d9;
        }

        .photo-placeholder-icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: #1677ff;
        }

        .status-message {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .status-message.show {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        @media print {
            body { background-color: white; font-size: 12px; }
            .header, .domain, .photo-placeholder { display: none; }
            .container { margin: 0; box-shadow: none; border-radius: 0; }
            .section { break-inside: avoid; page-break-inside: avoid; }
            .photo { border: 1px solid #ddd; display: block !important; }
        }

        @media (max-width: 375px) {
            .container { margin: 12px; }
            .section { padding: 16px 12px; }
            .photo, .photo-placeholder { width: 90px; height: 115px; }
            .info-row { padding: 12px 0; }
            .label, .value { font-size: 13px; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container { animation: fadeIn 0.5s ease-out; }
    </style>
</head>
<body>
    <header class="header" role="banner">
        <button class="close-btn" id="closeBtn" aria-label="å…³é—­é¡µé¢">Ã—</button>
        <h1>å¥åº·è¯æ˜</h1>
        <div style="width: 24px;"></div>
    </header>
    
    <div class="domain" role="contentinfo">cytj.wsjkw.zj.gov.cn</div>
    
    <main class="container" role="main">
        <section class="section" id="basic-info" aria-labelledby="basic-title">
            <h2 class="section-title" id="basic-title">
                <span class="section-icon icon-user" aria-hidden="true"></span>åŸºç¡€ä¿¡æ¯
            </h2>
            <div class="info-row"><span class="label">è¯ä»¶ç±»å‹</span><span class="value">å±…æ°‘èº«ä»½è¯</span></div>
            <div class="info-row"><span class="label">è¯ä»¶å·ç </span><span class="value">3****82123108*****8</span></div>
            <div class="info-row"><span class="label">å§“å</span><span class="value">*å¿ </span></div>
            <div class="info-row"><span class="label">æ€§åˆ«</span><span class="value">ç”·</span></div>
            <div class="info-row"><span class="label">å‡ºç”Ÿæ—¥æœŸ</span><span class="value">1998-08-08</span></div>
        </section>

        <section class="section" id="personal-info" aria-labelledby="personal-title">
            <h2 class="section-title" id="personal-title">
                <span class="section-icon icon-info" aria-hidden="true"></span>ä¸ªäººä¿¡æ¯
            </h2>
            <div class="info-row"><span class="label">å¹´é¾„</span><span class="value">26</span></div>
            <div class="info-row"><span class="label">è”ç³»æ–¹å¼</span><span class="value">136****6078</span></div>
            <div class="info-row"><span class="label">æ–‡åŒ–ç¨‹åº¦</span><span class="value empty">æœªå¡«å†™</span></div>
            <div class="info-row">
                <span class="label">ä¸ªäººç…§ç‰‡</span>
                <div class="photo-container">
                    <!-- æ‰‹åŠ¨åŠ è½½å ä½ç¬¦ -->
                    <div class="photo-placeholder" id="photoPlaceholder">
                        <div class="photo-placeholder-icon">ğŸ“·</div>
                        <div>ç‚¹å‡»åŠ è½½ä¸ªäººç…§ç‰‡</div>
                    </div>
                    <!-- ç…§ç‰‡æ˜¾ç¤ºåŒºåŸŸ -->
                    <img id="userPhoto" class="photo" alt="ä¸ªäººç…§ç‰‡">
                </div>
            </div>
        </section>

        <section class="section" id="company-info" aria-labelledby="company-title">
            <h2 class="section-title" id="company-title">
                <span class="section-icon icon-company" aria-hidden="true"></span>å•ä½ä¿¡æ¯
            </h2>
            <div class="info-row"><span class="label">ä¸“ä¸šç±»åˆ«</span><span class="value">é£Ÿå“/å…¬å…±åœºæ‰€</span></div>
            <div class="info-row"><span class="label">å·¥é¾„</span><span class="value empty">æœªå¡«å†™</span></div>
        </section>

        <section class="section" id="certificate-info" aria-labelledby="certificate-title">
            <h2 class="section-title" id="certificate-title">
                <span class="section-icon icon-certificate" aria-hidden="true"></span>å¥åº·è¯ä¿¡æ¯
            </h2>
            <div class="info-row"><span class="label">å‘è¯æ—¥æœŸ</span><span class="value">2026-01-30</span></div>
            <div class="info-row"><span class="label">æœ‰æ•ˆæœŸè‡³</span><span class="value">2027-01-29</span></div>
            <div class="info-row"><span class="label">å¥åº·è¯ç¼–ç </span><span class="value">009SF012601300017</span></div>
            <div class="info-row"><span class="label">å‘è¯æœºæ„</span><span class="value">é«˜ç…§è¡—é“ç¤¾åŒºå«ç”ŸæœåŠ¡ä¸­å¿ƒ</span></div>
        </section>
    </main>

    <!-- çŠ¶æ€æ¶ˆæ¯ -->
    <div class="status-message" id="statusMessage"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // å…ƒç´ å¼•ç”¨
            const userPhoto = document.getElementById('userPhoto');
            const photoPlaceholder = document.getElementById('photoPlaceholder');
            const statusMessage = document.getElementById('statusMessage');
            const closeBtn = document.getElementById('closeBtn');
            
            // ä¿å­˜é€‰æ‹©çš„å›¾ç‰‡æ•°æ®ï¼ˆç”¨äºåˆ·æ–°åä¿æŒï¼‰
            let selectedPhotoData = null;

            // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
            function showStatus(text, type = 'info') {
                statusMessage.textContent = text;
                statusMessage.style.background = type === 'success' ? 'rgba(82, 196, 26, 0.9)' : 
                                               type === 'error' ? 'rgba(255, 77, 79, 0.9)' : 
                                               'rgba(0, 0, 0, 0.8)';
                statusMessage.classList.add('show');
                setTimeout(() => {
                    statusMessage.classList.remove('show');
                }, 3000);
                console.log(`ğŸ“¢ ${text}`);
            }

            // åŠ è½½ç…§ç‰‡åŠŸèƒ½
            function loadPhoto() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.style.display = 'none';
                
                input.onchange = function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        // éªŒè¯æ–‡ä»¶ç±»å‹
                        if (!file.type.startsWith('image/')) {
                            showStatus('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼', 'error');
                            return;
                        }
                        
                        // éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆæœ€å¤§5MBï¼‰
                        if (file.size > 5 * 1024 * 1024) {
                            showStatus('å›¾ç‰‡å¤ªå¤§ï¼Œè¯·é€‰æ‹©å°äº5MBçš„æ–‡ä»¶', 'error');
                            return;
                        }
                        
                        const reader = new FileReader();
                        
                        reader.onloadstart = function() {
                            showStatus('æ­£åœ¨è¯»å–å›¾ç‰‡...', 'info');
                        };
                        
                        reader.onload = function(e) {
                            // è®¾ç½®å›¾ç‰‡æº
                            userPhoto.src = e.target.result;
                            userPhoto.classList.add('show');
                            photoPlaceholder.style.display = 'none';
                            
                            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                            selectedPhotoData = e.target.result;
                            try {
                                localStorage.setItem('healthCertPhoto', e.target.result);
                                showStatus('âœ… ç…§ç‰‡åŠ è½½æˆåŠŸï¼å·²è‡ªåŠ¨ä¿å­˜', 'success');
                            } catch (err) {
                                showStatus('âœ… ç…§ç‰‡åŠ è½½æˆåŠŸï¼ï¼ˆæœ¬åœ°å­˜å‚¨å¤±è´¥ï¼‰', 'success');
                            }
                        };
                        
                        reader.onerror = function() {
                            showStatus('å›¾ç‰‡è¯»å–å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                        };
                        
                        reader.readAsDataURL(file);
                    }
                };
                
                document.body.appendChild(input);
                input.click();
                document.body.removeChild(input);
            }

            // å°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½ä¹‹å‰ä¿å­˜çš„ç…§ç‰‡
            function loadSavedPhoto() {
                try {
                    const savedPhoto = localStorage.getItem('healthCertPhoto');
                    if (savedPhoto) {
                        // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„Base64å›¾ç‰‡
                        if (savedPhoto.startsWith('data:image/')) {
                            userPhoto.src = savedPhoto;
                            userPhoto.classList.add('show');
                            photoPlaceholder.style.display = 'none';
                            selectedPhotoData = savedPhoto;
                            console.log('âœ… å·²åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„ç…§ç‰‡');
                        }
                    }
                } catch (err) {
                    console.log('æœªæ‰¾åˆ°ä¿å­˜çš„ç…§ç‰‡');
                }
            }

            // æ¸…é™¤ç…§ç‰‡
            function clearPhoto() {
                userPhoto.src = '';
                userPhoto.classList.remove('show');
                photoPlaceholder.style.display = 'flex';
                selectedPhotoData = null;
                localStorage.removeItem('healthCertPhoto');
                showStatus('ç…§ç‰‡å·²æ¸…é™¤', 'info');
            }

            // åˆå§‹åŒ–
            function init() {
                // åŠ è½½ä¿å­˜çš„ç…§ç‰‡
                loadSavedPhoto();
                
                // ç…§ç‰‡å ä½ç¬¦ç‚¹å‡»äº‹ä»¶
                photoPlaceholder.addEventListener('click', loadPhoto);
                
                // ç…§ç‰‡å³é”®èœå•ï¼ˆé•¿æŒ‰ç§»åŠ¨ç«¯ï¼‰
                userPhoto.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    if (confirm('æ˜¯å¦æ¸…é™¤å½“å‰ç…§ç‰‡ï¼Ÿ')) {
                        clearPhoto();
                    }
                    return false;
                });
                
                // å…³é—­æŒ‰é’®åŠŸèƒ½
                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        if (window.history.length > 1) {
                            window.history.back();
                        } else {
                            window.close();
                        }
                    });
                }
                
                // æ‰“å°æŒ‰é’®
                const printBtn = document.createElement('button');
                printBtn.textContent = 'æ‰“å°è¯æ˜';
                printBtn.style.cssText = `
                    position: fixed; bottom: 20px; right: 20px;
                    background: #1677ff; color: white; border: none;
                    padding: 12px 24px; border-radius: 25px;
                    font-size: 14px; cursor: pointer;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 100; transition: all 0.3s;
                    font-family: inherit;
                `;
                printBtn.onmouseenter = () => {
                    printBtn.style.background = '#0958d9';
                    printBtn.style.transform = 'translateY(-2px)';
                };
                printBtn.onmouseleave = () => {
                    printBtn.style.background = '#1677ff';
                    printBtn.style.transform = 'translateY(0)';
                };
                printBtn.onclick = () => window.print();
                document.body.appendChild(printBtn);
                
                // æ¸…é™¤ç…§ç‰‡æŒ‰é’®
                const clearBtn = document.createElement('button');
                clearBtn.textContent = 'æ¸…é™¤ç…§ç‰‡';
                clearBtn.style.cssText = `
                    position: fixed; bottom: 20px; left: 20px;
                    background: #ff4d4f; color: white; border: none;
                    padding: 12px 24px; border-radius: 25px;
                    font-size: 14px; cursor: pointer;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 100; transition: all 0.3s;
                    font-family: inherit;
                    display: ${selectedPhotoData ? 'block' : 'none'};
                `;
                clearBtn.onmouseenter = () => {
                    clearBtn.style.background = '#d9363e';
                    clearBtn.style.transform = 'translateY(-2px)';
                };
                clearBtn.onmouseleave = () => {
                    clearBtn.style.background = '#ff4d4f';
                    clearBtn.style.transform = 'translateY(0)';
                };
                clearBtn.onclick = clearPhoto;
                document.body.appendChild(clearBtn);
                
                // ç›‘å¬ç…§ç‰‡å˜åŒ–ï¼Œæ›´æ–°æ¸…é™¤æŒ‰é’®æ˜¾ç¤º
                const observer = new MutationObserver(function() {
                    clearBtn.style.display = userPhoto.classList.contains('show') ? 'block' : 'none';
                });
                observer.observe(userPhoto, { attributes: true, attributeFilter: ['class'] });
                
                // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶é‡æ–°æ£€æŸ¥å›¾ç‰‡
                document.addEventListener('visibilitychange', function() {
                    if (!document.hidden && selectedPhotoData && !userPhoto.src) {
                        userPhoto.src = selectedPhotoData;
                    }
                });
                
                // é”®ç›˜å¿«æ·é”®
                document.addEventListener('keydown', function(e) {
                    // Ctrl+P æ‰“å°
                    if (e.ctrlKey && e.key === 'p') {
                        e.preventDefault();
                        window.print();
                    }
                    // Esc å…³é—­
                    if (e.key === 'Escape') {
                        closeBtn.click();
                    }
                    // Space åŠ è½½ç…§ç‰‡ï¼ˆå½“ç„¦ç‚¹åœ¨å ä½ç¬¦ä¸Šæ—¶ï¼‰
                    if (e.key === ' ' && document.activeElement === photoPlaceholder) {
                        e.preventDefault();
                        loadPhoto();
                    }
                });
                
                // åˆå§‹åŒ–å®Œæˆæç¤º
                console.log('âœ… å¥åº·è¯æ˜é¡µé¢åˆå§‹åŒ–å®Œæˆ');
                console.log('ğŸ“¸ ç‚¹å‡»ç…§ç‰‡åŒºåŸŸåŠ è½½ä¸ªäººç…§ç‰‡');
                console.log('ğŸ–¨ï¸ ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®æ‰“å°è¯æ˜');
            }

            // å¯åŠ¨åˆå§‹åŒ–
            init();
        });

        // é¡µé¢å¸è½½å‰ä¿å­˜çŠ¶æ€
        window.addEventListener('beforeunload', function() {
            const userPhoto = document.getElementById('userPhoto');
            if (userPhoto && userPhoto.src && userPhoto.src.startsWith('data:image/')) {
                try {
                    localStorage.setItem('healthCertPhoto', userPhoto.src);
                } catch (err) {
                    // å¿½ç•¥å­˜å‚¨é”™è¯¯
                }
            }
        });
    </script>
</body>
</html>